graph TD
    %% Main Application Flow
    A[App.tsx] -->|routes to| B[Index.tsx]
    B -->|renders| C[ChatInterface]

    %% Chat Components
    C -->|uses| D[ChatInput]
    C -->|uses| E[ChatMessage]
    C -->|uses| F[MicrophoneButton]
    C -->|uses| G[SettingsDrawer]

    %% Service Integration
    D -->|hooks| H[useAnthropicChat]
    F -->|uses| I[speech-recognition]
    C -->|uses| J[speech-synthesis]

    %% State and Utils
    H -->|types| K[anthropic.types]
    D -->|uses| L[use-mobile]
    G -->|uses| M[use-toast]

    %% UI Components
    D -->|uses| N[ui/input]
    D -->|uses| O[ui/button]
    E -->|uses| P[ui/avatar]
    G -->|uses| Q[ui/drawer]
    
    %% Service Dependencies
    I -->|implements| R[speech.d.ts]
    J -->|implements| R
    H -->|external| S[Anthropic API]

    %% Utility Dependencies
    T[utils.ts] -->|used by| D
    T -->|used by| E
    T -->|used by| C

    %% State Management Concerns
    U[Local State] -.->|scattered in| C
    U -.->|scattered in| D
    U -.->|scattered in| G

    %% Potential Circular Dependencies
    C -.->|potential circular| D
    D -.->|potential circular| H
    H -.->|potential circular| C

    %% Missing Abstractions
    V[Missing Provider<br/>Interface] -.->|needed| H
    W[Missing Speech<br/>Interface] -.->|needed| I
    W -.->|needed| J

    %% Style Coupling
    X[App.css] -->|styles| A
    Y[index.css] -->|global styles| Z[main.tsx]

    %% Suboptimal Patterns
    style V fill:#ff9999
    style W fill:#ff9999
    style U fill:#ffcc99